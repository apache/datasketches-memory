<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.24) on Thu Sep 05 21:39:05 UTC 2024 -->
<title>org.apache.datasketches.memory (datasketches-memory-java8 3.0.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-09-05">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.apache.datasketches.memory (datasketches-memory-java8 3.0.1 API)";
        }
    }
    catch(err) {
    }
//-->
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<main role="main">
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.apache.datasketches.memory</h1>
</div>
<div class="contentContainer">
<section><a id="package.description">
<!--   -->
</a>
<div class="block"><p>This package provides high performance primitive and primitive array access to
 off-heap memory and memory-mapped file resources, consistent views into
 <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio" class="externalLink"><code>ByteBuffer</code></a>, and on-heap primitive arrays. It can be used as a more
 comprehensive and flexible replacement for <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio" class="externalLink"><code>ByteBuffer</code></a>.
 </p>

 <p>In addition, this package provides:</p>

 <ul><li>Two different access APIs: read-only <a href="Memory.html" title="interface in org.apache.datasketches.memory"><code>Memory</code></a> and
 <a href="WritableMemory.html" title="interface in org.apache.datasketches.memory"><code>WritableMemory</code></a> for absolute offset access,
 and read-only <a href="Buffer.html" title="interface in org.apache.datasketches.memory"><code>Buffer</code></a> and
 <a href="WritableBuffer.html" title="interface in org.apache.datasketches.memory"><code>WritableBuffer</code></a>
 for relative positional access (similar to ByteBuffer).</li>

 <li>Clean separation of Read-only API from Writable API, which makes writable versus read-only
 resources detectable at compile time.</li>

 <li>The conversion from Writable to read-only is just a cast, so no unnecessary objects are
 created. For example:
 <blockquote><pre>
     WritableMemory wMem = ...
     Memory mem = wMem;
 </pre></blockquote>
 </li>

 <li> <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink"><code>AutoCloseable</code></a> for the external resources that require it,
 which enables compile-time checks for non-closed resources.</li>

 <li>Immediate invalidation of all downstream references of an AutoCloseable
 resource when that resource is closed, either manually or by the JVM.
 This virtually eliminates the possibility of use-after-close errors.</li>

 <li>Improved performance over the prior Memory implementation.</li>

 <li>Cleaner internal architecture, which will make it easier to extend in the future.</li>

 <li>No external dependencies, which makes it simple to install in virtually any Java environment.
 </li>
 </ul>

 <p>More specifically, this package provides access to four different types of resources using
 two different access APIs. These resources can be viewed as contiguous blobs of bytes that provide at least
 byte-level read and write access. The four resources are:</p>

 <ul><li>Off-heap memory allocated by the user.</li>
 <li>Memory-mapped files, both writable and read-only.</li>
 <li><code>ByteBuffers</code>, both heap and off-heap, writable and read-only.</li>
 <li>Heap-based primitive arrays, which can be accessed as writable or read-only.</li>
 </ul>

 <p>The two different access APIs are:</p>
 <ul><li><i>Memory, WritableMemory</i>: Absolute offset addressing into a resource.</li>
 <li><i>Buffer, WritableBuffer</i>: Position relative addressing into a resource.</li>
 </ul>

 <p>In addition, all combinations of access APIs and backing resources can be accessed via
 multibyte primitive methods (e.g.,
 <i>getLong(...), getLongArray(...), putLong(...), putLongArray(...)</i>) as either
 <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteOrder.html?is-external=true#BIG_ENDIAN" title="class or interface in java.nio" class="externalLink"><code>ByteOrder.BIG_ENDIAN</code></a> or <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteOrder.html?is-external=true#LITTLE_ENDIAN" title="class or interface in java.nio" class="externalLink"><code>ByteOrder.LITTLE_ENDIAN</code></a>.</p>

 <p>The resources don't know or care about the access APIs, and the access
 APIs don't really know or care what resource they are accessing.</p>

 <p>An off-heap or memory-mapped file resource can also be explicitly closed by the user</p>
 <blockquote><pre>
     //Using try-with-resources block:
     try (WritableMemory wmem = WritableMemory.map(File file)) {
       doWork(wMem) // read and write to memory mapped file.
     }

     //Using explicit close():
     WritableMemory wmem = WritableMemory.map(File file);
     doWork(wMem) // read and write to memory mapped file.
     wmem.close();
 </pre></blockquote>

 <p>Whatever thread of your process is responsible for allocating an off-heap or memory-mapped resource
 is responsible for closing it or making sure it gets closed. This is also true for the special
 memory-mapping methods load(), isLoaded() and force().</p>

<p>Moving back and forth between <i>Memory</i> and <i>Buffer</i>:</p>
<blockquote><pre>
    Memory mem = ...
    Buffer buf = mem.asBuffer();
    ...
    Memory mem2 = buf.asMemory();
    ...
 </pre></blockquote>

 <p>Hierarchical memory regions can be easily created:</p>
 <blockquote><pre>
     WritableMemory wMem = ...
     WritableMemory wReg = wMem.writableRegion(offset, length); //OR
     Memory region = wMem.region(offset, length);
 </pre></blockquote>

 <p>All methods are checked for bounds violations.</p>

 <p>The classes in this package are not thread-safe.</p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Lee Rhodes</dd>
</dl>
</section>
<ul class="blockList">
<li class="blockList">
<table class="typeSummary">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Buffer.html" title="interface in org.apache.datasketches.memory">Buffer</a></th>
<td class="colLast">
<div class="block">Defines the read-only API for relative positional access to a resource.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Memory.html" title="interface in org.apache.datasketches.memory">Memory</a></th>
<td class="colLast">
<div class="block">Defines the read-only API for offset access to a resource.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="MemoryRequestServer.html" title="interface in org.apache.datasketches.memory">MemoryRequestServer</a></th>
<td class="colLast">
<div class="block">The MemoryRequestServer is a callback interface to provide a means for off-heap, heap and ByteBuffer
 backed resources to request more memory.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="Positional.html" title="interface in org.apache.datasketches.memory">Positional</a></th>
<td class="colLast">
<div class="block">Defines the relative positional API.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="Resource.html" title="interface in org.apache.datasketches.memory">Resource</a></th>
<td class="colLast">
<div class="block">The base class for Memory and Buffer plus some common static variables and check methods.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="WritableBuffer.html" title="interface in org.apache.datasketches.memory">WritableBuffer</a></th>
<td class="colLast">
<div class="block">Defines the writable API for relative positional access to a resource</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="WritableMemory.html" title="interface in org.apache.datasketches.memory">WritableMemory</a></th>
<td class="colLast">
<div class="block">Defines the writable API for offset access to a resource.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="DefaultMemoryRequestServer.html" title="class in org.apache.datasketches.memory">DefaultMemoryRequestServer</a></th>
<td class="colLast">
<div class="block">This example MemoryRequestServer is simple but demonstrates one of many ways to
 manage continuous requests for larger memory.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="MurmurHash3v2.html" title="class in org.apache.datasketches.memory">MurmurHash3v2</a></th>
<td class="colLast">
<div class="block">The MurmurHash3 is a fast, non-cryptographic, 128-bit hash function that has
 excellent avalanche and 2-way bit independence properties.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="XxHash.html" title="class in org.apache.datasketches.memory">XxHash</a></th>
<td class="colLast">
<div class="block">The XxHash is a fast, non-cryptographic, 64-bit hash function that has
 excellent avalanche and 2-way bit independence properties.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="BufferPositionInvariantsException.html" title="class in org.apache.datasketches.memory">BufferPositionInvariantsException</a></th>
<td class="colLast">
<div class="block">Position operation violation.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="MemoryBoundsException.html" title="class in org.apache.datasketches.memory">MemoryBoundsException</a></th>
<td class="colLast">
<div class="block">Specific RuntimeException for bounds violations.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="MemoryException.html" title="class in org.apache.datasketches.memory">MemoryException</a></th>
<td class="colLast">
<div class="block">Specific RuntimeExceptions for the datasketches-memory component.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="ReadOnlyException.html" title="class in org.apache.datasketches.memory">ReadOnlyException</a></th>
<td class="colLast">
<div class="block">The exception thrown when attempting to write into a read-only Resource.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2015&#x2013;2024. All rights reserved.</small></p>
</footer>
</body>
</html>
