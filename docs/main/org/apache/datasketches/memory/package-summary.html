<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (21) on Tue Dec 10 16:12:41 UTC 2024 -->
<title>org.apache.datasketches.memory (datasketches-memory 5.0.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-12-10">
<meta name="description" content="declaration: package: org.apache.datasketches.memory">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#package">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Package:</p>
<ul>
<li><a href="#package-description">Description</a></li>
<li>Related Packages</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li>Related Packages&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package org.apache.datasketches.memory" class="title">Package org.apache.datasketches.memory</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">org.apache.datasketches.memory</span></div>
<section class="package-description" id="package-description">
<div class="block">This package provides high performance primitive and primitive array access to direct (native),
 off-heap memory and memory-mapped file resources, and consistent views into
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link"><code>ByteBuffer</code></a>, and on-heap primitive arrays. It can be used as a more
 comprehensive and flexible replacement for <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link"><code>ByteBuffer</code></a>.

 <p>In addition, this package provides:</p>

 <ul><li>Two different access APIs: read-only <a href="Memory.html" title="interface in org.apache.datasketches.memory"><code>Memory</code></a> and
 <a href="WritableMemory.html" title="interface in org.apache.datasketches.memory"><code>WritableMemory</code></a> for absolute offset access,
 and read-only <a href="Buffer.html" title="interface in org.apache.datasketches.memory"><code>Buffer</code></a> and
 <a href="WritableBuffer.html" title="interface in org.apache.datasketches.memory"><code>WritableBuffer</code></a>
 for relative positional access (similar to ByteBuffer).</li>

 <li>Clean separation of Read-only API from Writable API, which makes writable versus read-only
 resources detectable at compile time.</li>

 <li>The conversion from Writable to read-only is just a cast, so no unnecessary objects are
 created. For example:
 <blockquote><pre>
     WritableMemory wMem = ...
     Memory mem = wMem;
 </pre></blockquote>
 </li>

 <li> <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link"><code>AutoCloseable</code></a> for the external resources that require it,
 which enables compile-time checks for non-closed resources.</li>

 <li>Immediate invalidation of all downstream references of an AutoCloseable
 resource when that resource is closed, either manually or by the JVM.
 This virtually eliminates the possibility of accidentally writing into the memory space
 previously owned by a closed resource.</li>

 <li>Improved performance over the prior Memory implementation.</li>

 <li>No external dependencies, which makes it simple to install in virtually any Java environment.
 </li>
 </ul>

 <p>More specifically, this package provides access to four different types of resources using
 two different access APIs. These resources are contiguous blobs of bytes that provide at least
 byte-level read and write access. The four resources are:</p>

 <ul><li>Direct (a.k.a. Native) off-heap memory allocated by the user.</li>
 <li>Memory-mapped files, both writable and read-only.</li>
 <li><code>ByteBuffers</code>, both heap-based and direct, writable and read-only.</li>
 <li>Heap-based primitive arrays, which can be accessed as writable or read-only.</li>
 </ul>

 <p>The two different access APIs are:</p>
 <ul><li><i>Memory, WritableMemory</i>: Absolute offset addressing into a resource.</li>
 <li><i>Buffer, WritableBuffer</i>: Position relative addressing into a resource.</li>
 </ul>

 <p>In addition, all combinations of access APIs and backing resources can be accessed via
 multibyte primitive methods (e.g.
 <i>getLong(...), getLongArray(...), putLong(...), putLongArray(...)</i>) as either
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteOrder.html#BIG_ENDIAN" title="class or interface in java.nio" class="external-link"><code>ByteOrder.BIG_ENDIAN</code></a> or <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteOrder.html#LITTLE_ENDIAN" title="class or interface in java.nio" class="external-link"><code>ByteOrder.LITTLE_ENDIAN</code></a>.</p>

 <p>The resources don't know or care about the access APIs, and the access
 APIs don't really know or care what resource they are accessing.</p>

 <p>An access API is joined with a resource with a static factory method.

<p>Moving back and forth between <i>Memory</i> and <i>Buffer</i>:</p>
<blockquote><pre>
    Memory mem = ...
    Buffer buf = mem.asBuffer();
    ...
    Memory mem2 = buf.asMemory();
    ...
 </pre></blockquote>

 <p>Hierarchical memory regions can be easily created:</p>
 <blockquote><pre>
     WritableMemory wMem = ...
     WritableMemory wReg = wMem.writableRegion(offset, length); //OR
     Memory region = wMem.region(offset, length);
 </pre></blockquote></div>
<dl class="notes">
<dt>Author:</dt>
<dd>Lee Rhodes</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab1" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab1', 2)" class="table-tab">Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab5" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab5', 2)" class="table-tab">Exception Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel" aria-labelledby="class-summary-tab0">
<div class="summary-table two-column-summary">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="Buffer.html" title="interface in org.apache.datasketches.memory">Buffer</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Defines the read-only API for relative positional access to a resource.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab5"><a href="BufferPositionInvariantsException.html" title="class in org.apache.datasketches.memory">BufferPositionInvariantsException</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab5">
<div class="block">Position operation violation.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="DefaultMemoryRequestServer.html" title="class in org.apache.datasketches.memory">DefaultMemoryRequestServer</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">This example MemoryRequestServer is simple but demonstrates one of many ways to
 manage continuous requests for larger memory.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="Memory.html" title="interface in org.apache.datasketches.memory">Memory</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Defines the read-only API for offset access to a resource.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="MemoryRequestServer.html" title="interface in org.apache.datasketches.memory">MemoryRequestServer</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">The MemoryRequestServer is a callback interface to provide a means to request more memory
 for heap and off-heap WritableMemory resources that are not file-memory-mapped backed resources.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="MurmurHash3.html" title="class in org.apache.datasketches.memory">MurmurHash3</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">The MurmurHash3 is a fast, non-cryptographic, 128-bit hash function that has
 excellent avalanche and 2-way bit independence properties.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="Positional.html" title="interface in org.apache.datasketches.memory">Positional</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Defines the relative positional API.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="Resource.html" title="interface in org.apache.datasketches.memory">Resource</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">The base class for Memory and Buffer plus some common static variables and check methods.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="WritableBuffer.html" title="interface in org.apache.datasketches.memory">WritableBuffer</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Defines the writable API for relative positional access to a resource</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="WritableMemory.html" title="interface in org.apache.datasketches.memory">WritableMemory</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Defines the writable API for offset access to a resource.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="XxHash.html" title="class in org.apache.datasketches.memory">XxHash</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">The XxHash is a fast, non-cryptographic, 64-bit hash function that has
 excellent avalanche and 2-way bit independence properties.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2024. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
